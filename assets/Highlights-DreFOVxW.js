import{g as i,u as j,j as s,h as y,r as k,p as I,a as E,w as S,b as L}from"./index-D13jHWSg.js";import{S as w}from"./ScrollTrigger-BS49OFpx.js";import{r as o}from"./react-BkY1S2IL.js";i.registerPlugin(w);const C=()=>{const d=o.useRef([]),p=o.useRef([]),g=o.useRef([]),[f,n]=o.useState({isEnd:!1,startPlay:!1,videoId:0,isLastVideo:!1,isPlaying:!1}),[x,b]=o.useState([]),{isEnd:N,isLastVideo:m,startPlay:h,videoId:a,isPlaying:l}=f;j(()=>{i.to("#slider",{transform:`translateX(${-100*a}%)`,duration:2,ease:"power2.inOut"}),i.to("#video",{scrollTrigger:{trigger:"#video",toggleActions:"restart none none none"},onComplete:()=>{n(r=>({...r,startPlay:!0,isPlaying:!0}))}})},[N,a]),o.useEffect(()=>{let r=0,t=p.current;if(t[a]){let e=i.to(t[a],{onUpdate:()=>{const v=Math.ceil(e.progress()*100);v!=r&&(r=v,i.to(g.current[a],{width:window.innerWidth<760||window.innerWidth<1200?"10vw":"4vw"}),i.to(t[a],{width:`${r}%`,backgroundColor:"white"}))},onComplete:()=>{l&&(i.to(g.current[a],{width:"12px"}),i.to(t[a],{backgroundColor:"#afafaf"}))}});a==0&&e.restart();const u=()=>{e.progress(d.current[a].currentTime/y[a].videoDuration)};l?i.ticker.add(u):i.ticker.remove(u)}},[a,h,l]),o.useEffect(()=>{x.length>3&&(l?h&&d.current[a].play():d.current[a].pause())},[h,a,l,x]);const c=(r,t)=>{switch(r){case"video-end":n(e=>({...e,isEnd:!0,videoId:t+1}));break;case"video-last":n(e=>({...e,isLastVideo:!0}));break;case"video-reset":n(e=>({...e,videoId:0,isLastVideo:!1}));break;case"pause":n(e=>({...e,isPlaying:!e.isPlaying}));break;case"play":n(e=>({...e,isPlaying:!e.isPlaying}));break;default:return f}},P=(r,t)=>b(e=>[...e,t]);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center",children:y.map((r,t)=>s.jsx("div",{id:"slider",className:"sm:pr-20 pr-10",children:s.jsxs("div",{className:"video-carousel_container",children:[s.jsx("div",{className:"w-full h-full flex-center rounded-3xl overflow-hidden bg-black",children:s.jsx("video",{id:"video",playsInline:!0,className:`${r.id===2&&"translate-x-44"} pointer-events-none`,preload:"auto",muted:!0,ref:e=>d.current[t]=e,onEnded:()=>t!==3?c("video-end",t):c("video-last"),onPlay:()=>n(e=>({...e,isPlaying:!0})),onLoadedMetadata:e=>P(t,e),children:s.jsx("source",{src:r.video,type:"video/mp4"})})}),s.jsx("div",{className:"absolute top-12 left-[5%] z-10",children:r.textLists.map((e,u)=>s.jsx("p",{className:"md:text-2xl text-xl font-medium",children:e},u))})]})},r.id))}),s.jsxs("div",{className:"relative flex-center mt-10",children:[s.jsx("div",{className:"flex-center py-5 px-7 bg-gray-300 backdrop-blur rounded-full",children:d.current.map((r,t)=>s.jsx("span",{className:"mx-2 w-3 h-3 bg-gray-200 rounded-full relative cursor-pointer",ref:e=>g.current[t]=e,children:s.jsx("span",{className:"absolute h-full w-full rounded-full",ref:e=>p.current[t]=e})},t))}),s.jsx("button",{className:"control-btn",children:s.jsx("img",{src:m?k:l?E:I,alt:m?"replay":l?"pause":"play",onClick:m?()=>c("video-reset"):l?()=>c("pause"):()=>c("play")})})]})]})};i.registerPlugin(w);const V=()=>(j(()=>{i.to("#title",{opacity:1,y:0,scrollTrigger:{trigger:"#title",start:"top 100%",toggleActions:"restart none none reset"}}),i.to(".link",{opacity:1,y:0,duration:.9,stagger:.25,scrollTrigger:{trigger:"#highlights",start:"top 100%",toggleActions:"restart none none reset"}})},[]),s.jsx("section",{id:"highlights",className:"w-screen overflow-hidden h-full common-padding bg-zinc",children:s.jsxs("div",{className:"screen-max-width",children:[s.jsxs("div",{className:"mb-12 w-full md:flex items-end justify-between",children:[s.jsx("h5",{id:"title",className:"section-heading shiny-text",children:"Apple's Allure"}),s.jsxs("div",{className:"flex flex-wrap items-end gap-5",children:[s.jsxs("p",{className:"link",children:["Discover cinematic",s.jsx("img",{src:S,alt:"watch",className:"ml-2"})]}),s.jsxs("p",{className:"link",children:["Enchantment",s.jsx("img",{src:L,alt:"right",className:"ml-2"})]})]})]}),s.jsx(C,{})]})}));export{V as default};
